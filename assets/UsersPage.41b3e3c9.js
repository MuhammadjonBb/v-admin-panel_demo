import{Q as F}from"./QPage.b0984c75.js";import{a as j}from"./QLayout.171c6731.js";import{Q as _,a as m,b as L,c as M,S as R}from"./QTable.0dae5795.js";import{Q as x}from"./QCheckbox.a8a936e0.js";import{P as q,aH as O,r as $,S as g,U as b,V as a,j as t,W as s,_ as o,aF as h,$ as u,Q as c,a2 as y,aY as W,D as Q,aT as V,Z as Y}from"./index.94fa42e8.js";import{Q as Z}from"./QTr.798f0df9.js";import{g as G,e as C,f as P}from"./QItemLabel.1e01a216.js";import{Q as k,e as J}from"./QSelect.d2bb26c1.js";import{Q as K}from"./QSpace.41fc64f0.js";import{Q as X}from"./QList.cbde4cd1.js";import{u as ee,C as U}from"./ClosePopup.19d47213.js";import{b as D}from"./beautifyDate.4318ca9d.js";import{u as z,_ as S}from"./UsersModal.5ce7e6fc.js";import{u as te}from"./vue-i18n.esm-bundler.61bc1595.js";import"./QCard.a4ca1398.js";import"./QSeparator.5d694be6.js";import"./QImg.2154a7d2.js";import"./DefaultInput.95b99efe.js";import"./PhoneInput.b484b22c.js";import"./PasswordInput.fef953f7.js";import"./axios.4876605a.js";import"./formatPhoneNum.ebb17780.js";const ae={class:"text-grey-5",style:{"font-weight":"500"}},le={class:"column"},oe={class:"text-grey-7",style:{"font-size":"12px"}},se={class:"column"},re={class:"row items-center q-pa-sm full-width"},ne={class:"row items-center q-mr-md"},ie={class:"text-grey-7",style:{"font-size":"15px"}},ue={class:"text-grey-8",style:{"font-size":"15px"}},de={class:"row items-center"},me={class:"text-grey-7",style:{"font-size":"15px"}},ce={class:"row items-center"},fe=["onClick"],pe=q({__name:"UsersTable",props:["data"],emits:["onEdit"],setup(w,{emit:f}){const{t:d}=te(),v=z();O();const n=$(!1),p=$([]),N=ee();function T(){p.value.splice(0)}function B(l){const i=[];for(let e=1;e<=l;e++)i.push(e);return i}function E(l){if(l==="\u0410\u043A\u0442\u0438\u0432")return"positive text-white";if(l==="\u041D\u0435 \u0430\u043A\u0442\u0438\u0432")return"red-6 text-white";if(l==="\u0423\u0434\u0430\u043B\u0435\u043D")return"text-white dark"}function H(l){N.modal.users.edit=!0,f("onEdit",l)}function A(l){v.deleteUser(l).then(()=>{V.create({type:"positive",message:d("notification.users.deleted"),position:"top-right"})}).catch(()=>{V.create({type:"negative",message:d("notification.users.deleteError"),position:"top-right"})})}function I(l){if(l==="super_admin")return"\u0421\u0443\u043F\u0435\u0440 \u0410\u0434\u043C\u0438\u043D";if(l==="user")return"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C";if(l==="admin")return"\u0410\u0434\u043C\u0438\u043D"}return(l,i)=>(g(),b(M,{dense:"","table-class":"q-mx-none",flat:"","table-header-style":"font-weight: 500;font-size: 14px; background-color: #f2f2f2;","table-header-class":"text-grey-7 q-pa-none",rows:w.data,"row-key":"id",selected:p.value,"onUpdate:selected":i[1]||(i[1]=e=>p.value=e),selection:"multiple",columns:[{name:"id",field:"id",label:"ID",sortable:!0,align:"left"},{name:"name",field:"name",label:`${l.$t("users.table.tableHead.name")}`,sortable:!0,align:"left"},{name:"role",field:e=>I(e.role),label:`${l.$t("users.table.tableHead.role")}`,sortable:!0,align:"left"},{name:"status",field:"status",label:`${l.$t("users.table.tableHead.status")}`,align:"left"},{name:"phone",field:"phone",label:`${l.$t("users.table.tableHead.phone")}`,sortable:!0,align:"left"},{name:"registerDate",field:"register_date",label:`${l.$t("users.table.tableHead.registerDate")}`,align:"left"},{name:"birthDate",field:"birthDate",label:`${l.$t("users.table.tableHead.birthday")}`,sortable:!0,align:"left"},{name:"action",label:"Action",field:"",headerStyle:"background-color: #f2f2f2;",align:"right"}]},{top:a(()=>[t(Z,{class:"item-center"},{default:a(()=>[t(x,{"model-value":n.value,"onUpdate:modelValue":i[0]||(i[0]=e=>n.value=e)},null,8,["model-value"]),s("span",ae,o(p.value.length)+", "+o(l.$t("table.choose")),1),t(h,{"text-color":"grey-5",icon:"delete",flat:"",round:"",onClick:T})]),_:1})]),"header-cell-id":a(e=>[t(_,{class:"text-left",style:{"background-color":"#f2f2f2"},props:e},{default:a(()=>[u(o(e.col.label)+" ",1),t(c,{name:"filter_list",size:"sm",color:"indigo-10"})]),_:2},1032,["props"])]),"header-cell-name":a(e=>[t(_,{class:"text-left",style:{"background-color":"#f2f2f2"},props:e},{default:a(()=>[u(o(e.col.label)+" ",1),t(c,{name:"filter_list",size:"sm",color:"indigo-10"})]),_:2},1032,["props"])]),"header-cell-phone":a(e=>[t(_,{class:"text-left",style:{"background-color":"#f2f2f2"},props:e},{default:a(()=>[u(o(e.col.label)+" ",1),t(c,{name:"filter_list",size:"sm",color:"indigo-10"})]),_:2},1032,["props"])]),"body-cell-registerDate":a(e=>[t(m,{props:e},{default:a(()=>[s("div",le,[s("span",null,o(y(D)(e.row.register_date)[0]),1),s("span",oe,o(y(D)(e.row.register_date)[1]),1)])]),_:2},1032,["props"])]),"body-cell-birthDate":a(e=>[t(m,{props:e},{default:a(()=>[s("div",se,[s("span",null,o(e.row.birthday),1)])]),_:2},1032,["props"])]),"header-cell-action":a(()=>[t(_,{class:"text-right",style:{"background-color":"#f2f2f2"}},{default:a(()=>[t(c,{name:"more_vert",size:"sm",color:"dark",class:"q-mr-xs"})]),_:1})]),"body-cell-status":a(e=>[t(m,{props:e},{default:a(()=>[t(G,{square:"",color:E(e.row.status),class:"full-width justify-center"},{default:a(()=>[u(o(e.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"header-selection":a(e=>[t(x,{modelValue:e.selected,"onUpdate:modelValue":r=>e.selected=r},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":a(e=>[t(x,{modelValue:e.selected,"onUpdate:modelValue":r=>e.selected=r},null,8,["modelValue","onUpdate:modelValue"])]),bottom:a(e=>[s("div",re,[s("div",ne,[t(k,{"dropdown-icon":"expand_more",borderless:"",dense:"",modelValue:e.pagination.rowsPerPage,"onUpdate:modelValue":r=>e.pagination.rowsPerPage=r,options:[5,10,20,50],"emit-value":"",class:"q-mr-sm q-pl-md q-pr-sm bg-grey-3",style:{"border-radius":"12px"}},null,8,["modelValue","onUpdate:modelValue"]),s("span",ie,o(l.$t("table.elmPerPage")),1)]),s("div",ue,o(e.pagination.rowsPerPage*e.pagination.page-e.pagination.rowsPerPage==0?1:e.pagination.rowsPerPage*e.pagination.page-e.pagination.rowsPerPage)+" - "+o(e.pagination.rowsPerPage*e.pagination.page)+" "+o(l.$t("table.from"))+" "+o(w.data.length)+" "+o(l.$t("table.items")),1),t(K),s("div",de,[t(k,{"dropdown-icon":"expand_more",borderless:"",dense:"",modelValue:e.pagination.page,"onUpdate:modelValue":r=>e.pagination.page=r,options:B(e.pagesNumber),"emit-value":"",class:"q-mr-sm q-pl-md q-pr-sm bg-grey-3",style:{"border-radius":"12px"}},null,8,["modelValue","onUpdate:modelValue","options"]),s("span",me,o(l.$t("table.from"))+" "+o(e.pagesNumber)+" "+o(l.$t("table.pages")),1)]),s("div",ce,[t(L,{dense:"",modelValue:e.pagination.page,"onUpdate:modelValue":r=>e.pagination.page=r,min:1,"no-number":"",max:e.pagesNumber,"direction-links":"",color:"grey"},null,8,["modelValue","onUpdate:modelValue","max"])])])]),"body-cell-name":a(e=>[t(m,{props:e},{default:a(()=>[s("div",{class:"row items-center",onClick:r=>l.$router.push("/users/about/"+e.row.id),style:{cursor:"pointer"}},[t(W,{icon:"person",class:"bg-grey-4 q-mr-sm","text-color":"grey-7",size:"24px"}),u(" "+o(e.row.name),1)],8,fe)]),_:2},1032,["props"])]),"body-cell-role":a(e=>[t(m,{props:e},{default:a(()=>[s("span",null,o(e.row.role),1)]),_:2},1032,["props"])]),"body-cell-action":a(e=>[t(m,{props:e},{default:a(()=>[t(h,{flat:"",icon:"more_vert",rounded:"",dense:""}),t(J,null,{default:a(()=>[t(X,{style:{"min-width":"100px"}},{default:a(()=>[Q((g(),b(C,null,{default:a(()=>[t(P,null,{default:a(()=>[t(h,{dense:"",flat:"",class:"text-capitalize text-left","text-color":"grey-8",onClick:r=>H(e.row)},{default:a(()=>[t(c,{size:"xs",name:"edit",color:"positive",class:"on-left"}),u(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[U]]),Q((g(),b(C,null,{default:a(()=>[t(P,null,{default:a(()=>[t(h,{dense:"",flat:"",class:"text-capitalize text-left","text-color":"grey-8",onClick:r=>A(e.row.id)},{default:a(()=>[t(c,{name:"delete",size:"xs",color:"negative",class:"on-left"}),u(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[U]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","selected","columns"]))}}),ge={class:"text-h5 text-weight-bold"},He=q({__name:"UsersPage",setup(w){const f=z();f.getUsers();const d=$(null);function v(n){d.value=n}return(n,p)=>(g(),b(j,null,{default:a(()=>[t(F,{class:"q-pa-md main__container"},{default:a(()=>[s("h1",ge,o(n.$t("users.title")),1),t(R,{class:"q-mb-md","dynamic-route":{component:"users",modalName:"create"},"is-modal":!0}),y(f).users?(g(),b(pe,{key:0,data:y(f).users,onOnEdit:v},null,8,["data"])):Y("",!0),t(S,{label:n.$t("users.modal.addTitle"),"modal-name":"create","user-data":d.value},null,8,["label","user-data"]),t(S,{label:n.$t("users.modal.editTitle"),"modal-name":"edit","user-data":d.value},null,8,["label","user-data"])]),_:1})]),_:1}))}});export{He as default};
