import{Q as H}from"./QPage.b0984c75.js";import{a as R}from"./QLayout.171c6731.js";import{Q as V,a as D,b as W,c as O,S as j}from"./QTable.0dae5795.js";import{Q as S}from"./QCheckbox.a8a936e0.js";import{aD as Z,aE as G,P as U,r as _,S as h,U as x,V as a,j as t,W as s,_ as o,aF as b,$ as w,Q as v,D as Q,a2 as y,aT as J,w as K,Z as X}from"./index.94fa42e8.js";import{Q as Y}from"./QTr.798f0df9.js";import{e as T,f as E}from"./QItemLabel.1e01a216.js";import{Q as ee}from"./QList.cbde4cd1.js";import{e as te,Q as F,k as ae}from"./QSelect.d2bb26c1.js";import{Q as N}from"./QSpace.41fc64f0.js";import{u as B,C as P}from"./ClosePopup.19d47213.js";import{b as L}from"./beautifyDate.4318ca9d.js";import{u as A}from"./vue-i18n.esm-bundler.61bc1595.js";import{a as le,Q as I}from"./QCard.a4ca1398.js";import{_ as oe}from"./DefaultInput.95b99efe.js";import{_ as ne}from"./PhoneInput.b484b22c.js";import{u as se}from"./use-quasar.8dacccb1.js";import"./QSeparator.5d694be6.js";import"./QImg.2154a7d2.js";const z=Z("feedback",{state:()=>({feedbackList:[]}),actions:{getFeedbackList(){G(()=>import("./feedback.132313f2.js"),[]).then(i=>{this.feedbackList=i.default})}}}),ie={class:"text-grey-5",style:{"font-weight":"500"}},de={class:"column"},re={class:"text-grey-7",style:{"font-size":"12px"}},ue={class:"row items-center q-pa-sm full-width"},me={class:"row items-center q-mr-md"},ce={class:"text-grey-7",style:{"font-size":"15px"}},fe={class:"text-grey-8",style:{"font-size":"15px"}},pe={class:"row items-center"},ge={class:"text-grey-7",style:{"font-size":"15px"}},be={class:"row items-center"},ve=U({__name:"FeedbackTable",props:["data"],emits:["onEdit"],setup(i,{emit:u}){const{t:m}=A();z();const p=B(),d=_([]),g=_(!1);function k(){d.value.splice(0)}function $(n){const c=[];for(let e=1;e<=n;e++)c.push(e);return c}function q(n){p.modal.feedback.edit=!0,u("onEdit",n)}function C(n){setTimeout(()=>{J.create({color:"positive",textColor:"white",message:m("notification.consultation.deleted"),position:"top-right",group:!1})},700)}return(n,c)=>(h(),x(O,{dense:"","table-class":"q-mx-none",flat:"","table-header-style":"font-weight: 500;font-size: 14px; background-color: #f2f2f2;","table-header-class":"text-grey-7 q-pa-none",rows:i.data,"row-key":"id",selected:d.value,"onUpdate:selected":c[1]||(c[1]=e=>d.value=e),selection:"multiple",columns:[{name:"id",field:"id",label:"ID",sortable:!0,align:"left"},{name:"name",field:"name",label:`${n.$t("consultations.table.tableHead.name")}`,sortable:!0,align:"left"},{name:"phone",field:"phone",label:`${n.$t("consultations.table.tableHead.phone")}`,sortable:!0,align:"left"},{name:"date",field:"date",label:`${n.$t("consultations.table.tableHead.apllicationTime")}`,align:"left"},{name:"action",label:"Action",field:"",headerStyle:"background-color: #f2f2f2;",align:"right"}]},{top:a(()=>[t(Y,{class:"item-center"},{default:a(()=>[t(S,{"model-value":g.value,"onUpdate:modelValue":c[0]||(c[0]=e=>g.value=e)},null,8,["model-value"]),s("span",ie,o(d.value.length)+", "+o(n.$t("table.choose")),1),t(b,{"text-color":"grey-5",icon:"delete",flat:"",round:"",onClick:k})]),_:1})]),"header-cell-id":a(e=>[t(V,{class:"text-left",style:{"background-color":"#f2f2f2"},props:e},{default:a(()=>[w(o(e.col.label)+" ",1),t(v,{name:"filter_list",size:"sm",color:"indigo-10"})]),_:2},1032,["props"])]),"header-cell-name":a(e=>[t(V,{class:"text-left",style:{"background-color":"#f2f2f2"},props:e},{default:a(()=>[w(o(e.col.label)+" ",1),t(v,{name:"filter_list",size:"sm",color:"indigo-10"})]),_:2},1032,["props"])]),"header-cell-phone":a(e=>[t(V,{class:"text-left",style:{"background-color":"#f2f2f2"},props:e},{default:a(()=>[w(o(e.col.label)+" ",1),t(v,{name:"filter_list",size:"sm",color:"indigo-10"})]),_:2},1032,["props"])]),"header-cell-action":a(()=>[t(V,{class:"text-right",style:{"background-color":"#f2f2f2"}},{default:a(()=>[t(v,{name:"more_vert",size:"sm",color:"dark",class:"q-mr-xs"})]),_:1})]),"body-cell-action":a(e=>[t(D,{props:e},{default:a(()=>[t(b,{flat:"",icon:"more_vert",rounded:"",dense:""}),t(te,null,{default:a(()=>[t(ee,{style:{"min-width":"100px"}},{default:a(()=>[Q((h(),x(T,null,{default:a(()=>[t(E,null,{default:a(()=>[t(b,{dense:"",flat:"",class:"text-capitalize text-left","text-color":"grey-8",onClick:l=>q(e.row)},{default:a(()=>[t(v,{size:"xs",name:"edit",color:"positive",class:"on-left"}),w(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[P]]),Q((h(),x(T,null,{default:a(()=>[t(E,null,{default:a(()=>[t(b,{onClick:l=>C(e.row.id),dense:"",flat:"",class:"text-capitalize text-left","text-color":"grey-8"},{default:a(()=>[t(v,{name:"delete",size:"xs",color:"negative",class:"on-left"}),w(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[P]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-date":a(e=>[t(D,{props:e},{default:a(()=>[s("div",de,[s("span",null,o(y(L)(e.row.date)[0]),1),s("span",re,o(y(L)(e.row.date)[1]),1)])]),_:2},1032,["props"])]),"header-selection":a(e=>[t(S,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":a(e=>[t(S,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l},null,8,["modelValue","onUpdate:modelValue"])]),bottom:a(e=>[s("div",ue,[s("div",me,[t(F,{"dropdown-icon":"expand_more",borderless:"",dense:"",modelValue:e.pagination.rowsPerPage,"onUpdate:modelValue":l=>e.pagination.rowsPerPage=l,options:[5,10,20,50],"emit-value":"",class:"q-mr-sm q-pl-md q-pr-sm bg-grey-3",style:{"border-radius":"12px"}},null,8,["modelValue","onUpdate:modelValue"]),s("span",ce,o(n.$t("table.elmPerPage")),1)]),s("div",fe,o(e.pagination.rowsPerPage*e.pagination.page-e.pagination.rowsPerPage==0?1:e.pagination.rowsPerPage*e.pagination.page-e.pagination.rowsPerPage)+" - "+o(e.pagination.rowsPerPage*e.pagination.page)+" "+o(n.$t("table.from"))+" "+o(i.data.length)+" "+o(n.$t("table.items")),1),t(N),s("div",pe,[t(F,{"dropdown-icon":"expand_more",borderless:"",dense:"",modelValue:e.pagination.page,"onUpdate:modelValue":l=>e.pagination.page=l,options:$(e.pagesNumber),"emit-value":"",class:"q-mr-sm q-pl-md q-pr-sm bg-grey-3",style:{"border-radius":"12px"}},null,8,["modelValue","onUpdate:modelValue","options"]),s("span",ge,o(n.$t("table.from"))+" "+o(e.pagesNumber)+" "+o(n.$t("table.pages")),1)]),s("div",be,[t(W,{dense:"",modelValue:e.pagination.page,"onUpdate:modelValue":l=>e.pagination.page=l,min:1,"no-number":"",max:e.pagesNumber,"direction-links":"",color:"grey"},null,8,["modelValue","onUpdate:modelValue","max"])])])]),_:1},8,["rows","selected","columns"]))}});function _e(i){return i.startsWith("+7")?i.substring(5):i.startsWith("+998")?i.substring(4):i}const he={class:"text-h6 font-weight-bold"},xe={class:"row no-wrap",style:{gap:"20px"}},ye={class:"row q-mt-lg"},M=U({__name:"FeedbackModal",props:["modalName","label","feedbackData"],setup(i){const u=i,m=_(!1),p=_(""),d=_(""),{t:g}=A(),k=B();z();const $=se();function q(l){return l?m.value=!0:(m.value=!1,g("validation.required"))}function C(l){const r=/\d/g,f=l.match(r);return(f?f.length:0)>8?m.value=!0:(m.value=!1,g("validation.required"))}K(u,()=>{e()});function n(){if(!m.value){p.value="",d.value="",$.notify({message:g("validation.fail"),color:"negative",position:"top"}),m.value=!1;return}u.modalName==="create"?(c(),$.notify({message:g("notification.consultation.created"),color:"positive",position:"top-right"})):u.modalName==="edit"&&c()}function c(){k.closeModal(),p.value="",d.value=""}function e(){p.value=u.feedbackData.name,d.value=_e(u.feedbackData.phone)}return(l,r)=>(h(),x(ae,{modelValue:y(k).modal.feedback[u.modalName],"onUpdate:modelValue":r[5]||(r[5]=f=>y(k).modal.feedback[u.modalName]=f),persistent:""},{default:a(()=>[t(le,{style:{"min-width":"700px","border-radius":"16px"},class:"q-pa-md"},{default:a(()=>[t(I,{class:"row items-center"},{default:a(()=>[s("div",he,o(i.label==="\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"?l.$t("consultations.modal.addTitle"):l.$t("consultations.modal.editTitle")),1),t(N),Q(t(b,{icon:"close","text-color":"primary",flat:"",class:"bg-grey-3",style:{width:"32px",height:"32px","border-radius":"8px"},size:"13px",onClick:r[0]||(r[0]=f=>c())},null,512),[[P]])]),_:1}),t(I,{class:"q-pt-none column"},{default:a(()=>[s("div",xe,[t(oe,{text:p.value,"onUpdate:text":r[1]||(r[1]=f=>p.value=f),rules:[q],name:"name",placeholder:l.$t("placeholder.name"),label:l.$t("consultations.modal.inputs.name")},null,8,["text","rules","placeholder","label"]),t(ne,{rules:[C],text:d.value,"onUpdate:text":r[2]||(r[2]=f=>d.value=f)},null,8,["rules","text"])]),s("div",ye,[t(N),Q(t(b,{onClick:r[3]||(r[3]=f=>c()),color:"indigo-10",flat:"",label:l.$t("btn.cancel"),style:{"border-radius":"12px"},class:"q-py-sm bg-grey-2 q-px-xl q-mr-md","no-caps":""},null,8,["label"]),[[P]]),t(b,{onClick:r[4]||(r[4]=f=>n()),color:"white",flat:"",label:l.$t("btn.save"),style:{"border-radius":"12px"},class:"q-py-sm q-px-xl bg-indigo-10","no-caps":""},null,8,["label"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ke={class:"text-h5 text-weight-bold"},He=U({__name:"FeedbackPage",setup(i){const u=z(),m=_({});u.getFeedbackList();function p(d){m.value=d}return(d,g)=>(h(),x(R,null,{default:a(()=>[t(H,{class:"q-pa-md main__container"},{default:a(()=>[s("h1",ke,o(d.$t("consultations.title")),1),t(j,{class:"q-mb-md","dynamic-route":{component:"feedback",modalName:"create"},isModal:!0}),y(u).feedbackList?(h(),x(ve,{key:0,data:y(u).feedbackList,onOnEdit:p},null,8,["data"])):X("",!0),t(M,{"modal-name":"create",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C","feedback-data":m.value},null,8,["feedback-data"]),t(M,{"modal-name":"edit",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C","feedback-data":m.value},null,8,["feedback-data"])]),_:1})]),_:1}))}});export{He as default};
